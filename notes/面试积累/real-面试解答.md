## 20181215 字节跳动一面 50分钟 效率工程团队 后端
### 1. 找出数组中第 k 大的数，Kth Largest 
其实相当于 求数组中最大的前 K 个数，topK 问题

应该提出疑问：是否可以改变输入的数组？

可以改变输入数组：  
思路： 以第一个数为基准，用一次快速排序找到他的正确位置，下标为 mid，则 mid 左边的数小于等于基数，mid 右边的数大于等于基数，可以知道 nums[mid] 是第 len(nums)-mid 大的数，有无重复数字都可以这样做  
平均的时间复杂度为 O(nlogn)， 最好的时候一次 O(n)，最差的时候 ？？？
```python
def topk(nums, k):
    n = len(nums)
    if k > n or k <= 0:
        return None
    left, right = 0, n-1
    while left <= right:
        mid = quick_sort(nums, left, right)
        if mid == n-k:
            return nums[mid]
        elif mid > n-k:
            right = mid - 1
        else:
            left = mid + 1

def quick_sort(nums, left, right):
    key = nums[left]
    while left < right:
        while left < right and nums[right] >= key:
            right -= 1
        nums[left] = nums[right]
        while left < right and nums[left] <= key:
            left += 1
        nums[right] = nums[left]
    nums[left] = key
    return left
```

如果需要返回最大的前 K 个数，需要按照从大到小的顺序排列，知道了最大的第 K 个数的下标后，返回其左边的数组即可。
  
若直接排序，则时间复杂度为 O(nlogn)
用最大堆可以将时间复杂度降到 O(nlogk), 适合处理海量数据
```python

```

### 2. 上述问题用一次堆排序的时间复杂度，快排加二分实现的时间复杂度
一次堆排序时间复杂度 O(logn)，总的O(nlogn)

### 3. python 实现多并发用的进程还是线程，进程和线程的区别

提问： 是使用 CPU 密集型还是 IO 密集型？

对于 python， 若为 CPU 密集型应用多进程模型，需要大量的计算；  
若为 IO 密集型应用多线程模型，需要数据的读取写入、网络 IO 数据传输。  

进程和线程的区别：  
1. 根本区别：进程是资源分配的基本单位，线程是程序执行的最小单位
2. 开销方面：每个进程有独立的代码和数据空间，每启动一个进程，系统会为他分配地址空间，进程间的切换有较大开销；同一类线程共享代码和数据空间，切换和创建的开销较小
3. 线程通信更加方便，同一进程下的线程共享全局变量、静态变量等数据；而进程需要以通信方式(IPC)进行
4. 由于进程有自己独立的地址空间，因此多进程程序更加健壮；而多线程程序有一个线程挂掉，全部线程都会挂掉

### 4. tcp 和 udp 的区别，传输过程有什么不同，tcp的数据能够一次接收吗
tcp 和 udp 的区别：  
1. TCP 发送数据前需要建立连接； UDP 不需要
2. TCP 更可靠、稳定，但是效率较低，有延时，占用系统资源高； UDP 传输速度快，但不可靠、不稳定，可能丢包
3. 对网络通信质量有要求，数据准确时用 TCP，如浏览器、邮箱等； 不高、要求快用 UDP，如 QQ语音、视频
4. **本质区别： TCP 面向字节流，UDP 面向报文**  
TCP 通过字节流传输，有窗口大小限制，太长的话会被拆分进行发送
UDP 通过报文传输，无论交给 UDP 多长的报文都会一次性发送，会保留报文的边界，不合并不拆分

传输过程有什么不同，tcp的数据能够一次接收吗？？？不明白是什么？？？

### 5. 数据库怎么判断一个字段是否需要建索引，索引用的什么数据结构
- 较频繁的作为查询条件的字段应该创建索引
- 唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件
- 更新非常频繁的字段不适合创建索引
索引的数据结构：B+树、B-树、通信R-树、散列  
大部分数据库系统及文件系统都采用 B-树 或 B+树 作为索引结构，B-树索引实现是一个专门为范围查询设计的，散列实现对直接查询方式能提供最优性能，但对一定范围的查找却效率低下。

### 6. 什么是事务，事务出错的如何回滚，保证正确
事务: 数据库运行的逻辑工作单位，是用户定义的一组操作序列，要么完全执行，要么完全不执行。  
ACID：原子性、一致性、隔离性、持续性

### 7. 栈和堆在程序上的区别
**堆栈空间分配：** 
- 栈区 stack： 由编译器自动分配释放，存放函数的参数值、局部变量的值等，操作方式类似数据结构中的栈 
- 堆区 heap： 一般由程序员分配释放，若程序员不释放，程序结束时可能由 OS 回收。不是数据结构中的堆，分配方式类似于链表

**堆栈缓存方式：**
- 栈使用一级缓存，通常是被调用时处于存储空间中，调用完立即释放
- 堆使用二级缓存，生命周期由虚拟机的垃圾回收算法来决定，因此调用速度更低一些

void f() { int* p=new int[5]; }   
new：分配了一块堆内存
指针p：分配一块栈内存  
因此，上述为在栈内存中存放一个指向一块堆内存的指针 p。 程序先确定在堆中分配内存的大小，然后调用 operator new 分配内存，然后返回这块内存的首地址，放入栈中。

### 8. python 的 is 和 == 的区别
python 对象包括三个基本要素，身份标识 id、 数据类型 type、 值 value  
is 和 == 都是用于用于对象的比较判断，但判断内容不相同。
- is 同一性运算符，比较两个对象的 id 是否相同。 当 a 和 b 的值相同时，只有数值型和字符型，**并且在通用对象池中的情况下**， a is b 为 True； 而 tuple，list，dict，set 时，a is b 为 False。 对于浮点数，只有正浮点数值相等时 a is b 为 True
- == 比较两个对象的值是否相同
- id(object) 查看 object 所在的内存地址

备注： 事实上 python 为了优化速度，使用了小整数对象池，避免为整数频繁申请和销毁内存空间。只有数值在 [-5,256] 之间时同一个数值的 id 才会相等，超过范围就是 Fasle。同理，字符串对象也有类似的缓冲池。

### 9. python 中正则的 search 和 match 区别，正则怎么实现过程如何
match() 在 string 的开始位置匹配，如果不匹配，返回 None，只有在 0 位置匹配成功才有返回  
search() 扫描整个 string 查找匹配，全部没有返回 None

### 10. 一个很大的文本，比如log数据，以行存储，如何快速计算一个字段的平均值


## 20181220 金山云 测试开发 20分钟
### 1. 简历上的 appium+python 自动化测试，具体讲一下做了什么？ 比如“滑动”功能怎么实现
### 2. 有没有什么难点？遇到了什么问题？怎么解决的？ 
### 3. 性能测试做了什么? 你说的那些不算是性能测试吧？

### 4. python 多进程怎么实现的？
multiprocessing 中的 Process 类，代表进程对象
用进程池 Pool 的方式批量创建子进程，Pool 的默认大小是 CPU 的核数
对 Pool 对象调用 join() 方法会等待所有子进程执行完毕，调用 join() 之前必须先调用 close()，调用 close() 之后就不能继续添加新的 Process 了。
```python
pool_size = multiprocessing.cpu_count()*2
pool = multiprocessing.Pool(processes = 2)
    pool.apply_async(sparse_matrix, (filename, allword, matrix_file, )) # apply_async 是异步非阻塞的
pool.close()
pool.join()
```

### 5. linux 平时用过一些什么命令？ 查看 mysql 进程
ps aux | grep mysql

### 6. 文件很大的话如何处理？有没有遇到什么瓶颈？
1. 在 linux 下用 awk 命令
2. 读取大文件： 用 with open, 在打开文件的过程中，不会一次性读取全部文件，而是每次读取一行的方式，类似 buffer 机制
```python
with open(filename) as f:
    for line in f
```
3. 处理大文件：如果可以去重的话，尽量用 set 和 dic，不用 list（查询速度慢）
4. 用一些工具进行文件切割

### 7. 数据库，学生(学号、课程号、成绩)，查询全部学科成绩在80分以上的学生信息
select sno from student where sno not in (select sno from student where grad <= 80)


## 20181220 好未来 python 开发 45min
实际上应该是和测试相关的，测试工具的开发
1. 描述一下实习经历，测试，重点讲一下自动化测试，用到了 python 的哪些功能？

### 2. python 用过哪些数据结构？ 哪些是可变的，哪些不可变
python 有六种标准数据类型  
- 可变：list、set、dict
- 不可变，变量所指向的内存地址处的值不可改变： number（int、float、bool、complex）、 string、 tuple

### 3. 直接参数传递和引用传递有什么区别？ 类里面的变量是用的什么传递？
值传递： 传的是实参变量的值，形参是作为一个局部变量，形参改变不会影响主调函数中的实参
引用传递： 传的是实参变量的地址，被调函数中的形参修改会改变主调函数中的实参

python 中的“传对象引用”的方式，对于不可变对象相当于是值传递，可变对象相当于是引用传递。

### 4. python有什么比较大的优势，python 用过哪些开源包？
优雅、简洁、易懂，开发效率高、开源库丰富，可移植性、可扩展性、可嵌入性。  
自然语言处理jieba、 爬虫beautifulsoup、深度学习tensorflow、numpy

### 5. 多进程与多线程的区别？ 多线程里面：IO密集型任务，与资源的共享有啥关系吗？ 什么是僵尸进程？
僵尸进程： 子进程退出后，父进程没有调用 wait/waitpid 来获取子进程的状态信息，那子进程的进程描述符就仍让在系统中，这就是僵尸进程。

### 6. 除了 python 之外，还擅长什么？

### 7. linux 熟悉程度？ 写命令：查看端口号，查看进程，统计一个字符串出现的次数， 复制文件
netstat -anp | grep 80
ps aux | grep xxx
grep -c xxx filedir
cp sourcedir destdir

### 8. 编程： 给一个字符串，找出次数最多的字符和次数

### 9. 微信的输入框和发送界面，如何设计测试用例？
需要考虑通信问题，网络问题，对方是否能够接收