# 测试
<!-- GFM-TOC -->
* [测试基础](#测试基础)
	* [测试的种类](#测试的种类)
	* [测试流程](#测试流程)
* [测试用例](#测试用例)
	* [测试用例组成](#测试用例组成)
	* [测试用例设计方法](#测试用例设计方法)
* [bug](#bug)
	* [bug 的生命周期](#bug-的生命周期)
	* [bug 严重级别划分](#bug-严重级别划分)
* [接口测试](#接口测试)
* [性能测试](#性能测试)
* [自动化测试](#自动化测试)
<!-- GFM-TOC -->

## 测试基础
### 测试的种类
按测试对象：黑盒、白盒、灰盒  
按测试手段：手工、自动化  
按整体-局部: 单元、集成、系统、确认  
按程序是否运行：静态测试，即文档测试（不执行代码），如文档评审、代码走查；动态测试，如黑白灰盒

白盒测试： 又称结构测试、透明盒测试、逻辑驱动测试或基于代码的测试。测试者必须检查程序的内部结构，从检查程序的逻辑着手，得出测试数据。
灰盒测试： 灰盒测试多用于集成测试阶段，不仅关注输出、输入的正确性，同时也关注程序内部的情况。灰盒测试不像白盒那样详细、完整，但又比黑盒测试更关注程序的内部逻辑，常常是通过一些表征性的现象、事件、标志来判断内部的运行状态。

### 测试流程
1. 明确测试需求和方案
2. 测试用例编写
3. 执行测试，对测试用例进行补充和完善
4. 得到测试结果和报告
5. 文档归档
6. 发布

正式测试前先向主管确认项目排期。 接收版本 App测试版本送测规范 UI测试：核对rp/效果图 功能测试：核对需求文档、兼容性测试、性能压力测试， 尽快申请到正式环境下测试，后台订单统计测试、用户行为统计测试、发送上线报告、回归测试 

## 测试用例
### 测试用例组成
excel： 级别、执行方式（手动、自动）、主模块、子模块、测试步骤、预期结果

测试结果： 模块、具体测试点、测试人、测试结果、备注

测试用例组成元素
用例ID、 用例名称、测试目的、测试级别、参考信息、测试环境、前提条件、测试步骤、预期结果、设计人员

### 测试用例设计方法
**测试理论角度分析**  
1. 等价类划分法
将测试范围划分为几个互不相交的子集，其并集是全集，从每个子集中选出若干个**有代表性**的值作为测试用例  

划分到什么程度合适？看有多少资源和时间，以及是否值得

2. 边界值分析法
选出的测试用例，应选取正好等于、刚刚大于、刚刚小于边界的值。

3. 错误推测法
依靠经验和直觉，从而有针对性的编写检查这些错误的测试用例

4. 判定表法
是功能测试中最严谨的测试方法，适合逻辑判断复杂的场景，通过穷举条件或得结果，对结果再进行合并优化，得到一个判断清晰的策略表

5. 正交实验法
在各因素相互独立的情况下，设计出正交表（按一定规则生成的表，均匀分布），找出能以少数代替全面的测试用例。

**从用户角度设计**  
1. 功能测试用例
按照主要功能、次要功能顺序写；按照产品使用顺序写

2. 性能测试用例
查看功能测试用例，思考哪些在操作时会需要考虑性能

3. 压力测试用例
增加次数或延迟时间

4. 兼容性测试
在不同平台上使用，容错能力

5. 区分用例的重要性

## bug
### bug 的生命周期
测试人员应追踪 bug 的整个生命周期，从新建(new) 到关闭(closed)

- new: 新建 bug，未经评审需决定是否指派给开发人员进行修改
- open: 确认是需要修改的 bug，指派给开发人员
- fixed: 开发人员修改后，需回归测试验证
- delay: 暂时不需要修改的 bug
- closed: 经过测试人员回归验证后，关闭 bug
- reopen: 经验证后发现未修改完成，则重新打开，重新修改

### bug 严重级别划分
- 致命： 主程序不通，系统无法运行等。如内存泄露、严重数值计算错误、易崩溃、功能与需求设计不符等
- 严重： 影响系统功能或操作、主要功能严重缺陷，但不影响系统稳定性。如功能未实现、功能报错、轻微计算失误
- 一般： 界面、性能缺陷。如边界条件下错误、大数据无响应等
- 建议： 易用性及建议性问题

## 接口测试
https://www.cnblogs.com/feng0815/p/7509541.html
### 接口
- 程序内部接口： 方法与方法之间、模块与模块之间的交互，供内部系统进行调用
- 系统对外接口： 需要从别的网站或服务器获取资源信息，通过他们的 api

**常见接口**  
- webService接口：走 SOAP 协议通过 HTTP 传输，请求报文和返回报文都是 XML 格式，可以用 SoapUI、jmeter、loadrunner 等工具测试
- HTTP API 接口： 走 HTTP 协议，通过路径区分调用方式，请求报文为 key-value 形式，返回报文为 json 串； 有 post 和 get 等方法，可以用 postman、RESTClient、jmeter、loadrunner 等工具测试

接口测试是测试系统组件间接口，主要用于检测外部系统与系统之间以及内部各个子系统之间的交互点。实际上是黑盒测试。

重点: 检查数据的交换，传递和控制管理过程，以及系统间的相互逻辑依赖关系等。

接口测试没有页面，通过接口规范文档上的调用地址、请求参数、拼接报文，然后发送请求，检查返回结果，只需测入参和出参。

### 接口组成
接口文档组成： 接口说明、调用 url、 请求方法、 请求参数（参数类型、说明）、返回参数说明

接口： 请求地址、请求方法、请求参数（入参、出参）、部分接口有请求头 header（存放校验信息，是否有权限请求服务器，如cookie）

#### 为什么要做接口测试
- 可以发现很多在页面上操作无法发现的 bug， 比如登陆的后端校验，防止使用抓包直接绕过前端校验，防止 SQL 注入
- 检查系统的异常处理能力
- 检查系统的安全性、稳定性

### 接口测试的方法
1. 接口请求报文拼接：传参方式  
用 key-value 或输入 json 串
2. post 和 get 请求  
get 请求直接在浏览器输入，浏览器能够直接请求到的都是 get 请求； post 需要借助工具发送

通用接口用例设计：
1. 通过性验证：按照接口文档的参数等正常传入，看是否能返回正确结果
2. 参数组合：
3. 接口安全： 绕过验证、绕过身份授权、参数是否加密、密码安全规则等
4. 异常验证： 传非必传、参数类型、入参长度

### 接口测试流程
1. 需求评审，熟悉业务和需求
2. 测试接口文档，由开发提供接口文档
3. 根据文档写测试用例
4. 用例评审
5. 执行测试，查看接口返回的数据是否正确，是否与文档、数据库一致
6. 提交测试报告

## 自动化测试
### selenium webdriver定位元素的方法
appium 中也有 webdriver 方法
by_id, by_name, class_name, xpath，根据 uiautomatorviewer 找到页面元素的 id name class xpath 等

### 开展自动化测试的方案，如何搭建自动化框架
1. 关于 APP ，需要安装配置环境和依赖，包括 JDK、 SDK、 python、 nodejs、 appium 等
2. 做好项目架构设计，用 PageObject 设计模式将页面元素与业务操作分离，分为页面层、操作层（分装各类页面操作）和业务层（执行各类页面操作）
3. 封装基本方法，如 appium 的启动关闭等、 打印日志、 获取设备信息、 基本操作方法（滑动、点击、放大等）、测试报告
4. 获取元素定位、 编写测试用例（yaml），一个测试用例对应一个操作方法
5. 执行测试用例， 得到测试报告

### 你理解的自动化测试
通过执行脚本自动测试软件，自动地实施软件的单元测试，功能测试，压力测试和性能测试等
1. 让自动化代替手动，减少一些手工测试的时间
2. 让每次回归或上线验证必须执行的测试用例优先自动化，减少重复劳动
3. 自动化测试和手工测试应该是相互补充的过程


## 性能测试
性能测试： 通过自动化的测试工具模拟多种正常、峰值以及异常负载条件来对系统的各项性能指标进行测试。

### 性能测试的类型
1. 基准测试：在给系统施加较低压力时，查看系统的运行状况并记录相关数做为基础参考
2. 负载测试：是指对系统不断地增加压力或增加一定压力下的持续时间，直到系统的某项或多项性能指标达到安全临界值，例如某种资源已经达到饱和状态等 。
3. 压力测试：压力测试是评估系统处于或超过预期负载时系统的运行情况，关注点在于系统在峰值负载或超出最大载荷情况下的处理能力。
4. 稳定性测试：在给系统加载一定业务压力的情况下，使系统运行一段时间，以此检测系统是否稳定。
5. 并发测试：测试多个用户同时访问同一个应用、同一个模块或者数据记录时是否存在死锁或者其他性能问题